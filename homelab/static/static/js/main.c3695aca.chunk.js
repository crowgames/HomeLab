(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{329:function(e,t,a){e.exports=a(668)},334:function(e,t,a){},335:function(e,t,a){},668:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(55),c=a.n(i),o=(a(334),a(18)),s=a(19),l=a(21),p=a(20),u=a(22),d=(a(335),a(39)),h=a(145),m=a(92),f=a(6),v=a.n(f),g=a(29),y=a(298),E=a.n(y),b=a(304),O=a.n(b),w=a(151),j=a.n(w),k=a(299),x=a.n(k),C=a(25),S=a.n(C),N=a(306),B=a.n(N),F=a(94),T=a.n(F),D=a(302),A=a.n(D),_=a(300),I=a.n(_),P=a(305),M=a.n(P),R=a(303),G=a.n(R),L=a(194),J=a.n(L),W=a(99),H=a.n(W),z=a(100),Y=a.n(z),K=a(101),U=a.n(K),V=a(271),X=a.n(V),q=a(272),$=a.n(q),Q=a(274),Z=a.n(Q),ee=a(270),te=a.n(ee),ae=a(273),ne=a.n(ae),re=a(190),ie=a.n(re),ce=a(35),oe=a(308),se=function(e){return e.split(".").reduce(function(e,t){return(e<<8)+parseInt(t,10)},0)>>>0},le=function(e,t){return t.some(function(e){return function(t){var a=t.split("/"),n=Object(oe.a)(a,2),r=n[0],i=n[1],c=void 0===i?32:i,o=~(Math.pow(2,32-c)-1);return(se(e)&o)===(se(r)&o)}}(e))};function pe(e){window.nw?window.nw.Window.open(e,{focus:!0,width:700,height:500},function(e){}):window.open(e,"_blank").focus()}function ue(e){return e.name&&e.name.length>2?e.name:e.ip}var de=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){this.props.navigate(e)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.devices.map(function(a){return r.a.createElement(J.a,{component:"div",disablePadding:!0},r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleClick(a.ip)},className:t.nested},r.a.createElement(Y.a,null,r.a.createElement(te.a,null)),r.a.createElement(U.a,{inset:!0,primary:ue(a)})))});return r.a.createElement(J.a,null,r.a.createElement("div",null,r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleClick("Overview")}},r.a.createElement(Y.a,null,r.a.createElement(X.a,null)),r.a.createElement(U.a,{primary:"Overview"})),r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleClick("Internet_Usage")}},r.a.createElement(Y.a,null,r.a.createElement($.a,null)),r.a.createElement(U.a,{primary:"Internet usage"})),r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleClick("Locations")}},r.a.createElement(Y.a,null,r.a.createElement(ne.a,null)),r.a.createElement(U.a,{primary:"Locations"})),r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleClick("Devices")}},r.a.createElement(Y.a,null,r.a.createElement(Z.a,null)),r.a.createElement(U.a,{primary:"Devices"})),r.a.createElement(ie.a,{in:!0,timeout:"auto",unmountOnExit:!0},a)))}}]),t}(r.a.Component),he=Object(g.withStyles)(function(e){return{root:{display:"flex"},nested:{paddingLeft:4*e.spacing.unit}}})(de),me=a(44),fe=a.n(me),ve=a(49),ge=a.n(ve),ye=a(275),Ee=a.n(ye),be=a(48),Oe=a.n(be),we=a(40),je=a.n(we),ke=a(276),xe=a.n(ke),Ce=a(192),Se=a.n(Ce),Ne=[1,2,3,4,5,6,7,8,9,10,11,12],Be=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return[r.a.createElement("div",{key:"spacer",className:e.appBarSpacer}),r.a.createElement(S.a,{key:"typo1",variant:"h4",gutterBottom:!0,component:"h2"},"Overview"),r.a.createElement(fe.a,{className:e.root},"Everything is fine!!!!"),r.a.createElement("div",{className:v()(e.layout,e.cardGrid)},r.a.createElement(je.a,{container:!0,spacing:40},Ne.map(function(t){return r.a.createElement(je.a,{item:!0,key:t,sm:12,md:6,lg:4},r.a.createElement(Oe.a,{className:e.card},r.a.createElement(Ee.a,{className:e.cardMedia,image:"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22288%22%20height%3D%22225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20288%20225%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_164edaf95ee%20text%20%7B%20fill%3A%23eceeef%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A14pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_164edaf95ee%22%3E%3Crect%20width%3D%22288%22%20height%3D%22225%22%20fill%3D%22%2355595c%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%2296.32500076293945%22%20y%3D%22118.8%22%3EThumbnail%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E",title:"Image title"}),r.a.createElement(ge.a,{className:e.cardContent},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Heading"),r.a.createElement(S.a,null,"This is a media card. You can use this section to describe the content.")),r.a.createElement(xe.a,null,r.a.createElement(Se.a,{size:"small",color:"primary"},"View"))))})))]}}]),t}(r.a.Component),Fe=Object(g.withStyles)(function(e){return{root:Object(m.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(8*e.spacing.unit,"px 0 ").concat(6*e.spacing.unit,"px")},heroButtons:{marginTop:4*e.spacing.unit},layout:{width:"auto"},cardGrid:{padding:"".concat(8*e.spacing.unit,"px 0")},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})(Be),Te=a(110),De=a(73),Ae=a(72),_e=a(67),Ie=a(33),Pe=a(197),Me=a.n(Pe),Re=a(290),Ge=a.n(Re),Le=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var i,c=this.props.history[Symbol.iterator]();!(t=(i=c.next()).done);t=!0){var o=i.value,s={name:o.time},l=!0,p=!1,u=void 0;try{for(var d,h=o.devices[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var m=d.value,f=0,v=[];for(var g in m.connections)v.push([g,m.connections[g]]);for(var y=0,E=v;y<E.length;y++){var b=E[y];this.props.cidr&&le(b[0],[this.props.cidr,"255.255.255.255/32","224.0.0.0/24"])||(f+=b[1].bsnd+b[1].brcv)}s[m.ip]=f/1024/30}}catch(j){p=!0,u=j}finally{try{l||null==h.return||h.return()}finally{if(p)throw u}}e.push(s)}}catch(j){a=!0,n=j}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}var O=["#0088FE","#00C49F","#FFBB28","#FF8042"],w=this.props.devices.map(function(e,t){return r.a.createElement(Ie.a,{type:"monotone",dataKey:e.ip,stackId:"1",stroke:O[t%O.length],fill:O[t%O.length]})});return r.a.createElement(Ie.h,{width:"100%",height:250},r.a.createElement(Ie.b,{width:"100%",height:"100%",data:e,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement(Ie.c,{strokeDasharray:"3 3"}),r.a.createElement(Ie.k,{dataKey:"name",domain:["dataMin","dataMax"],name:"Time",tickFormatter:function(e){return Ge()(1e3*e).format("DD/MM/YYYY HH:mm")},type:"number"}),r.a.createElement(Ie.l,{label:{value:"kb/s",angle:-90,position:"insideLeft"}}),w,r.a.createElement(Ie.j,null)))}}]),t}(r.a.Component),Je=["#0088FE","#00C49F","#FFBB28","#FF8042"],We=(Math.PI,[]),He=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={activeIndex:0},a.onPieEnter=a.onPieEnter.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onPieEnter",value:function(e,t){this.setState({activeIndex:t})}},{key:"render",value:function(){var e=this,t=this.props.classes;We.length=0;var a=!0,n=!1,i=void 0;try{for(var c,o=this.props.devices[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var s=c.value,l=0,p=[];for(var u in s.connections)p.push([u,s.connections[u]]);for(var d=0,h=p;d<h.length;d++){var m=h[d];this.props.cidr&&le(m[0],[this.props.cidr,"255.255.255.255/32","224.0.0.0/24"])||(l+=m[1].bsnd+m[1].brcv)}We.push({name:ue(s),value:l})}}catch(f){n=!0,i=f}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}return[r.a.createElement("div",{key:"spacer",className:t.appBarSpacer}),r.a.createElement(S.a,{key:"typo1",variant:"h4",gutterBottom:!0,component:"h2"},"Internet Usage"),r.a.createElement("div",{className:v()(t.layout,t.cardGrid)},r.a.createElement(je.a,{container:!0,spacing:40},r.a.createElement(je.a,{item:!0,key:"earth",sm:12,md:12,lg:12},r.a.createElement(Oe.a,{className:t.card,style:{minHeight:"500px"}},r.a.createElement(Me.a,{title:"Average network usage by device"}),r.a.createElement(ge.a,{className:t.cardContent},r.a.createElement(_e.a,{width:"100%",height:"100%"},r.a.createElement(Te.a,{onMouseEnter:this.onPieEnter},r.a.createElement(De.a,{data:We,cx:"50%",cy:"50%",labelLine:!1,innerRadius:"70%",outerRadius:"90%",fill:"#8884d8",dataKey:"value",activeShape:function(t){return function(e,t){var a=Math.PI/180,n=e.cx,i=e.cy,c=e.midAngle,o=e.innerRadius,s=e.outerRadius,l=e.startAngle,p=e.endAngle,u=e.fill,d=e.payload,h=e.percent,m=e.value,f=Math.sin(-a*c),v=Math.cos(-a*c),g=n+(s+10)*v,y=i+(s+10)*f,E=n+(s+30)*v,b=i+(s+30)*f,O=E+22*(v>=0?1:-1),w=b,j=v>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement("text",{x:n,y:i,dy:8,textAnchor:"middle",fill:u},d.name),r.a.createElement(Ie.i,{cx:n,cy:i,innerRadius:o,outerRadius:s,startAngle:l,endAngle:p,fill:u}),r.a.createElement(Ie.i,{cx:n,cy:i,startAngle:l,endAngle:p,innerRadius:s+6,outerRadius:s+10,fill:u}),r.a.createElement("path",{d:"M".concat(g,",").concat(y,"L").concat(E,",").concat(b,"L").concat(O,",").concat(w),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:O,cy:w,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:O+12*(v>=0?1:-1),y:w,textAnchor:j,fill:"#333"},parseFloat(m/1e3/t.getNumberOfScans()/30).toFixed(2)+"kB/s"),r.a.createElement("text",{x:O+12*(v>=0?1:-1),y:w,dy:18,textAnchor:j,fill:"#999"},"(".concat((100*h).toFixed(1),"% network load)")))}(t,e)},activeIndex:this.state.activeIndex,onMouseEnter:this.onPieEnter},We.map(function(e,t){return r.a.createElement(Ae.a,{fill:Je[t%Je.length]})})),r.a.createElement(Ie.e,{layout:"vertical",verticalAlign:"middle",align:"right"})))))),r.a.createElement(je.a,{item:!0,key:"selection",sm:12,md:12,lg:12},r.a.createElement(Oe.a,{className:t.card},r.a.createElement(Me.a,{title:"Usage over time"}),r.a.createElement(ge.a,{className:t.cardContent},r.a.createElement(_e.a,{width:"100%",height:"100%"},r.a.createElement(Le,{devices:this.props.devices,cidr:this.props.cidr,history:this.props.history})))))))]}},{key:"getNumberOfScans",value:function(){return this.props.history.length}}]),t}(r.a.Component),ze=Object(g.withStyles)(function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,layout:{width:"auto"},cardGrid:{padding:"0px 0"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})(He),Ye=a(41),Ke=a(309),Ue=a(307),Ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).total_packages=a.getTotalPackages(),a.refresh=a.refresh.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.initialize()}},{key:"componentDidUpdate",value:function(e,t){this.refresh()}},{key:"componentDidMount",value:function(){var e=this;Ye.select(window).on("mousemove",function(){return e.mousemove()}).on("mouseup",function(){return e.mouseup()}),this.width=500,this.height=500,this.proj=Ye.geo.orthographic().translate([this.width/2,this.height/2]).clipAngle(90).scale(220),this.sky=Ye.geo.orthographic().translate([this.width/2,this.height/2]).clipAngle(90).scale(300),this.path=Ye.geo.path().projection(this.proj).pointRadius(2),this.swoosh=Ye.svg.line().x(function(e){return e[0]}).y(function(e){return e[1]}).interpolate("cardinal").tension(0),this.links=[],this.arcLines=[],this.svg=Ye.select("#d3earth").append("svg").attr("width",this.width).attr("height",this.height).on("mousedown",function(){return e.mousedown()}),Object(Ke.a)().defer(Ye.json,"world-110m.json").await(function(t,a){return e.ready(t,a,e)}),this.ready=this.ready.bind(this),this.mousedown=this.mousedown.bind(this),this.mousemove=this.mousemove.bind(this),this.mouseup=this.mouseup.bind(this)}},{key:"ready",value:function(e,t,a){a.world=t,this.initialize()}},{key:"initialize",value:function(){var e=this;if(this.props.devices&&this.props.devices[0]&&this.props.devices[0].location){this.svg.selectAll("*").remove();var t=this.svg.append("defs").append("radialGradient").attr("id","ocean_fill").attr("cx","75%").attr("cy","25%");t.append("stop").attr("offset","5%").attr("stop-color","#fff"),t.append("stop").attr("offset","100%").attr("stop-color","#fff");var a=this.svg.append("defs").append("radialGradient").attr("id","globe_shading").attr("cx","55%").attr("cy","45%");a.append("stop").attr("offset","30%").attr("stop-color","#fff").attr("stop-opacity","0"),a.append("stop").attr("offset","100%").attr("stop-color","#505962").attr("stop-opacity","0.3");var n=this.svg.append("defs").append("radialGradient").attr("id","drop_shadow").attr("cx","50%").attr("cy","50%");n.append("stop").attr("offset","20%").attr("stop-color","#000").attr("stop-opacity",".5"),n.append("stop").attr("offset","100%").attr("stop-color","#000").attr("stop-opacity","0"),this.svg.append("ellipse").attr("cx",.4*this.width).attr("cy",450).attr("rx",.9*this.proj.scale()).attr("ry",.25*this.proj.scale()).attr("class","noclicks").style("fill","url(#drop_shadow)"),this.svg.append("circle").attr("cx",this.width/2).attr("cy",this.height/2).attr("r",this.proj.scale()).attr("class","noclicks").style("fill","url(#ocean_fill)");var r=Ue.a(this.world,this.world.objects.land);this.svg.append("path").datum(r).attr("class","land noclicks").attr("d",this.path).style("fill","#455a64"),this.svg.append("circle").attr("cx",this.width/2).attr("cy",this.height/2).attr("r",this.proj.scale()).attr("class","noclicks").style("fill","url(#globe_highlight)"),this.svg.append("circle").attr("cx",this.width/2).attr("cy",this.height/2).attr("r",this.proj.scale()).attr("class","noclicks").style("fill","url(#globe_shading)"),this.svg.append("g").attr("class","points").selectAll("text").data(this.getPlaces()).enter().append("path").attr("class","point").attr("d",this.path),this.svg.append("g").attr("class","arcs").selectAll("path").data(this.getArcLines()).enter().append("path").attr("class","arc").attr("d",this.path).style("stroke-width",function(e){return Math.min(50,Math.max(e.properties.count/this.total_packages*20,1))}),this.svg.append("g").attr("class","flyers").selectAll("path").data(this.getLinks()).enter().append("path").attr("class","flyer").attr("stroke",function(e){return e.threats.length>0?"red":"#0094FF"}).style("stroke-width",function(t){return Math.min(50,Math.max(t.count/e.total_packages*20,1))}).attr("d",function(t){return e.swoosh(e.flying_arc(t))}),this.refresh()}}},{key:"getTotalPackages",value:function(){var e=0,t=!0,a=!1,n=void 0;try{for(var r,i=function(){var t=r.value;if(!t.connections)return"continue";e+=Object.keys(t.connections).map(function(e,a){return t.connections[e].snd+t.connections[e].rcv}).reduce(function(e,t){return e+t},0)},c=this.props.devices[Symbol.iterator]();!(t=(r=c.next()).done);t=!0)i()}catch(o){a=!0,n=o}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}return e}},{key:"getPlaces",value:function(){var e=this,t=this.props.devices[0].location;t||(t={lat:0,lon:0});var a=[{type:"Feature",geometry:{type:"Point",coordinates:[t.lat,t.lon]}}],n=[],r=!0,i=!1,c=void 0;try{for(var o,s=function(){var t=o.value;if(!t.connections)return"continue";var a=Object.keys(t.connections).map(function(a,n){if(!le(a,[e.props.cidr,"255.255.255.255/32","224.0.0.0/24"])){var r=t.connections[a].location;return r||(r={lat:0,lon:0}),{type:"Feature",geometry:{type:"Point",coordinates:[r.lat,r.lon]}}}return null}).filter(function(e){return e});n=[].concat(Object(ce.a)(n),Object(ce.a)(a))},l=this.props.devices[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)s()}catch(p){i=!0,c=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw c}}return[].concat(a,Object(ce.a)(n))}},{key:"getArcLines",value:function(){var e=this,t=this.props.devices[0].location,a=[],n=!0,r=!1,i=void 0;try{for(var c,o=function(){var n=c.value;if(!n.connections)return"continue";var r=Object.keys(n.connections).map(function(a,r){var i=n.connections[a].location;return i||(i={lat:0,lon:0}),le(a,[e.props.cidr,"255.255.255.255/32","224.0.0.0/24"])?null:{type:"Feature",properties:{count:n.connections[a].snd+n.connections[a].rcv,threats:n.connections[a].threats,mac:n.mac},geometry:{type:"LineString",coordinates:[[t.lat,t.lon],[i.lat,i.lon]]}}}).filter(function(e){return e});a=[].concat(Object(ce.a)(a),Object(ce.a)(r))},s=this.props.devices[Symbol.iterator]();!(n=(c=s.next()).done);n=!0)o()}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a}},{key:"getLinks",value:function(){var e=this,t=this.props.devices[0].location,a=[],n=!0,r=!1,i=void 0;try{for(var c,o=function(){var n=c.value;if(!n.connections)return"continue";var r=Object.keys(n.connections).map(function(a,r){var i=n.connections[a].location;return i||(i={lat:0,lon:0}),le(a,[e.props.cidr,"255.255.255.255/32","224.0.0.0/24"])?null:{source:[t.lat,t.lon],target:[i.lat,i.lon],count:n.connections[a].snd+n.connections[a].rcv,threats:n.connections[a].threats,mac:n.mac}}).filter(function(e){return e});a=[].concat(Object(ce.a)(a),Object(ce.a)(r))},s=this.props.devices[Symbol.iterator]();!(n=(c=s.next()).done);n=!0)o()}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a}},{key:"mousedown",value:function(){this.m0=[Ye.event.pageX,Ye.event.pageY],this.o0=this.proj.rotate(),Ye.event.preventDefault()}},{key:"mousemove",value:function(){if(this.m0){var e=[Ye.event.pageX,Ye.event.pageY],t=[this.o0[0]+(e[0]-this.m0[0])/6,this.o0[1]+(this.m0[1]-e[1])/6];t[1]=t[1]>30?30:t[1]<-30?-30:t[1],this.proj.rotate(t),this.sky.rotate(t),this.refresh()}}},{key:"mouseup",value:function(){this.m0&&(this.mousemove(),this.m0=null)}},{key:"fade_at_edge",value:function(e){var t,a,n=this.proj.invert([this.width/2,this.height/2]),r=Ye.geo.greatArc();e.source?(t=e.source,a=e.target):(t=e.geometry.coordinates[0],a=e.geometry.coordinates[1]);var i=1.57-r.distance({source:t,target:n}),c=1.57-r.distance({source:a,target:n});return Ye.scale.linear().domain([-.1,0]).range([0,.1])(i<c?i:c)}},{key:"flying_arc",value:function(e){var t=e.source,a=e.target,n=this.location_along_arc(t,a,.5);return[this.proj(t),this.sky(n),this.proj(a)]}},{key:"location_along_arc",value:function(e,t,a){return Ye.geo.interpolate(e,t)(a)}},{key:"refresh",value:function(){var e=this,t=this;this.svg.selectAll(".land").attr("d",this.path),this.svg.selectAll(".point").attr("d",this.path),this.svg.selectAll(".arc").attr("d",this.path).attr("opacity",function(a){return t.props.devices.find(function(e){return e.mac===a.properties.mac})?e.fade_at_edge(a):0}),this.svg.selectAll(".flyer").attr("d",function(t){return e.swoosh(e.flying_arc(t))}).attr("opacity",function(a){return t.props.devices.find(function(e){return e.mac===a.mac})?e.fade_at_edge(a):0})}},{key:"render",value:function(){return r.a.createElement("div",{id:"d3earth",wdiht:"500",height:"500"})}}]),t}(r.a.Component),Xe=Object(g.withStyles)(function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar}})(Ve),qe=a(292),$e=a.n(qe),Qe=a(291),Ze=a.n(Qe),et=a(295),tt=a.n(et),at=a(294),nt=a.n(at),rt=a(293),it=a.n(rt),ct=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={selectedDevices:a.props.devices.map(function(e){return e.mac})},a.toggleDevice=a.toggleDevice.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"toggleDevice",value:function(e){Object(ce.a)(this.state.selectedDevices).find(function(t){return t===e.mac})?this.setState({selectedDevices:Object(ce.a)(this.state.selectedDevices).filter(function(t){return t!==e.mac})}):this.setState({selectedDevices:[].concat(Object(ce.a)(this.state.selectedDevices),[e.mac])})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.devices.map(function(t){return r.a.createElement(Ze.a,{control:r.a.createElement($e.a,{checked:e.state.selectedDevices.find(function(e){return e===t.mac}),onChange:function(){return e.toggleDevice(t)},value:t.name}),label:ue(t)})});return[r.a.createElement("div",{key:"spacer",className:t.appBarSpacer}),r.a.createElement(S.a,{key:"typo1",variant:"h4",gutterBottom:!0,component:"h2"},"Global Locations"),r.a.createElement("div",{className:v()(t.layout,t.cardGrid)},r.a.createElement(je.a,{container:!0,spacing:40},r.a.createElement(je.a,{item:!0,key:"earth",sm:12,md:8,lg:8},r.a.createElement(Oe.a,{className:t.card},r.a.createElement(ge.a,{className:t.cardContent,style:{textAlign:"center"}},r.a.createElement(Xe,{devices:this.props.devices.filter(function(t){return e.state.selectedDevices.find(function(e){return e===t.mac})}),cidr:this.props.cidr})))),r.a.createElement(je.a,{item:!0,key:"selection",sm:12,md:4,lg:4},r.a.createElement(Oe.a,{className:t.card},r.a.createElement(ge.a,{className:t.cardContent},r.a.createElement(it.a,{component:"fieldset",className:t.formControl},r.a.createElement(nt.a,{component:"legend"},"Display traffic of following devices"),r.a.createElement(tt.a,null,a)))))))]}}]),t}(r.a.Component),ot=Object(g.withStyles)(function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,layout:{width:"auto"},cardGrid:{padding:"0px 0"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})(ct),st=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return[r.a.createElement("div",{key:"spacer",className:e.appBarSpacer}),r.a.createElement(S.a,{key:"typo1",variant:"h4",gutterBottom:!0,component:"h2"},"Devices")]}}]),t}(r.a.Component),lt=Object(g.withStyles)(function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar}})(st),pt=a(297),ut=a.n(pt),dt=a(116),ht=a.n(dt),mt=a(112),ft=a.n(mt),vt=a(113),gt=a.n(vt),yt=a(115),Et=a.n(yt),bt=a(114),Ot=a.n(bt),wt=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=[],t=0,a=0;for(var n in this.props.device.connections)if(!le(n,[this.props.cidr,"255.255.255.255/32","224.0.0.0/24"])){var i=this.props.device.connections[n].threats.find(function(e){return e.lists.find(function(e){return e.indexOf("command_control")>=0})}),c=this.props.device.connections[n].threats.find(function(e){return e.lists.find(function(e){return e.indexOf("botnet")>=0})});if(i&&((i=JSON.parse(JSON.stringify(i))).lists=Object(ce.a)(i.lists).filter(function(e){return e.indexOf("command_control")>=0})),c&&((c=JSON.parse(JSON.stringify(c))).lists=Object(ce.a)(c.lists).filter(function(e){return e.indexOf("botnet")>=0})),i&&i.lists.length>0){t+=i.lists.length;var o=i.lists.map(function(e){var t="http://iplists.firehol.org/?ipset="+e.substring(e.lastIndexOf("/")+1).split(".")[0];return r.a.createElement("div",null,r.a.createElement("a",{href:"#",onClick:function(){return pe(t)}},e))});e.push(r.a.createElement("div",{className:"reportEntry"},"Communication with ",n,". This IP is listed on ",i.lists.length," malicious IP lists as controlling a bot net: ",o,r.a.createElement("br",null),"This can be evidence that the device is part of a bot net."))}if(c&&c.lists.length>0){a+=c.lists.length;var s=c.lists.map(function(e){var t="http://iplists.firehol.org/?ipset="+e.substring(e.lastIndexOf("/")+1).split(".")[0];return r.a.createElement("div",null,r.a.createElement("a",{href:"#",onClick:function(){return pe(t)}},e))});e.push(r.a.createElement("div",{className:"reportEntry"},"Communication with ",n,". This IP is listed on ",c.lists.length," IP lists as being part of a bot net: ",s,r.a.createElement("br",null)," This implies that this device communicates with a possibly infected device, but does not imply an infection of the device itself."))}}var l=null;return l=t>2?r.a.createElement(S.a,{style:{color:"#f44336"}},"Probably part of a known bot net"):t>0||a>2?r.a.createElement(S.a,{style:{color:"#FF8800"}},"With small probability part of a known bot net"):r.a.createElement(S.a,{style:{color:"#339900"}},"Not part of a known bot net"),r.a.createElement(ft.a,null,r.a.createElement(gt.a,{expandIcon:r.a.createElement(Ot.a,null)},l),r.a.createElement(Et.a,null,r.a.createElement(S.a,null,e)))}}]),t}(r.a.Component),jt=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"getAllThreatsConcerning",value:function(e,t){var a=this.props.device.connections[t].threats.find(function(t){return t.lists.find(function(t){return t.indexOf(e)>=0})});return a&&((a=JSON.parse(JSON.stringify(a))).lists=Object(ce.a)(a.lists).filter(function(t){return t.indexOf(e)>=0})),a}},{key:"addThreatReport",value:function(e,t,a){var n=0;for(var i in this.props.device.connections)if(!le(i,[this.props.cidr,"255.255.255.255/32","224.0.0.0/24"])){var c=this.getAllThreatsConcerning(e,i);if(c&&c.lists.length>0){n+=c.lists.length;var o=c.lists.map(function(e){var t="http://iplists.firehol.org/?ipset="+e.substring(e.lastIndexOf("/")+1).split(".")[0];return r.a.createElement("div",null,r.a.createElement("a",{href:"#",onClick:function(){return pe(t)}},e))});a.push(r.a.createElement("div",{className:"reportEntry"},"Communication with ",i,". This IP is listed on ",c.lists.length," malicious IP lists as ",t,": ",o))}}return n}},{key:"render",value:function(){this.props.classes;var e=[],t=this.addThreatReport("cryptominer","being part of a blockchain network",e),a=this.addThreatReport("invalid_ips","being an IP address that currently is not registered to anyone (suspicious)",e),n=this.addThreatReport("malware","being distributing malware or being infected with malware",e),i=this.addThreatReport("ransomware","being connected to ransomware control or distribution",e),c=this.addThreatReport("spam","being part of a spam network",e),o=(this.addThreatReport("tor","being part of the tor network (can be suspicious)",e),this.addThreatReport("tracking","tracking user behaviour for usage analytics or targeted advertisement",e),null);return o=4*t+4*a+2*n+2*i+1*c>9?r.a.createElement(S.a,{style:{color:"#f44336"}},"Suspicious traffic"):3*t+3*a+1*n+1*i>4?r.a.createElement(S.a,{style:{color:"#FF8800"}},"Suspicious traffic"):r.a.createElement(S.a,{style:{color:"#339900"}},"No significant suspicious traffic"),r.a.createElement(ft.a,null,r.a.createElement(gt.a,{expandIcon:r.a.createElement(Ot.a,null)},o),r.a.createElement(Et.a,null,r.a.createElement(S.a,null,e)))}}]),t}(r.a.Component),kt=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"getAllThreatsConcerning",value:function(e,t){var a=this.props.device.connections[t].threats.find(function(t){return t.lists.find(function(t){return t.indexOf(e)>=0})});return a&&((a=JSON.parse(JSON.stringify(a))).lists=Object(ce.a)(a.lists).filter(function(t){return t.indexOf(e)>=0})),a}},{key:"addThreatReport",value:function(e,t,a){var n=0;for(var i in this.props.device.connections)if(!le(i,[this.props.cidr,"255.255.255.255/32","224.0.0.0/24"])){var c=this.getAllThreatsConcerning(e,i);if(c&&c.lists.length>0){n+=c.lists.length;var o=c.lists.map(function(e){var t="http://iplists.firehol.org/?ipset="+e.substring(e.lastIndexOf("/")+1).split(".")[0];return r.a.createElement("div",null,r.a.createElement("a",{href:"#",onClick:function(){return pe(t)}},e))});a.push(r.a.createElement("div",{className:"reportEntry"},"Communication with ",i,". This IP is listed on ",c.lists.length," malicious IP lists as ",t,": ",o))}}return n}},{key:"render",value:function(){this.props.classes;var e=null;return e=r.a.createElement(S.a,{style:{color:"#339900"}},"No suspicious activities"),r.a.createElement(ft.a,null,r.a.createElement(gt.a,{expandIcon:r.a.createElement(Ot.a,null)},e),r.a.createElement(Et.a,null,r.a.createElement(S.a,null,[])))}}]),t}(r.a.Component),xt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return[r.a.createElement("div",{className:e.root},r.a.createElement(wt,{device:this.props.device,cidr:this.props.cidr}),r.a.createElement(jt,{device:this.props.device,cidr:this.props.cidr}),r.a.createElement(kt,{device:this.props.device,cidr:this.props.cidr}))]}}]),t}(r.a.Component),Ct=Object(g.withStyles)(function(e){return{root:{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit},heroButtons:{marginTop:4*e.spacing.unit},layout:{width:"auto"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})(xt),St=(Math.PI,function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=0,t=0,a=[];for(var n in this.props.device.connections)a.push([n,this.props.device.connections[n]]);for(var i=0,c=a;i<c.length;i++){var o=c[i];this.props.cidr&&le(o[0],[this.props.cidr,"255.255.255.255/32","224.0.0.0/24"])?e+=o[1].bsnd+o[1].brcv:t+=o[1].bsnd+o[1].brcv}var s=[{name:"Local network communication",value:e},{name:"Internet communication",value:t}],l=["#0088FE","#00C49F","#FFBB28","#FF8042"];return r.a.createElement(Ie.h,{width:"100%",height:250},r.a.createElement(Ie.g,{width:"100%",height:"100%",onMouseEnter:this.onPieEnter},r.a.createElement(Ie.f,{data:s,cx:"50%",cy:"50%",labelLine:!1,innerRadius:"70%",outerRadius:"100%",fill:"#8884d8",dataKey:"value"},s.map(function(e,t){return r.a.createElement(Ie.d,{fill:l[t%l.length]})})),r.a.createElement(Ie.e,{width:"30%",layout:"vertical",verticalAlign:"middle",align:"right"})))}}]),t}(r.a.Component)),Nt=(Math.PI,function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=0,t=0,a=[];for(var n in this.props.device.connections)a.push([n,this.props.device.connections[n]]);for(var i=0,c=a;i<c.length;i++){var o=c[i];e+=o[1].bsnd,t+=o[1].brcv}var s=[{name:"bytes received",value:t},{name:"bytes send",value:e}],l=["#0088FE","#00C49F","#FFBB28","#FF8042"];return r.a.createElement(Ie.h,{width:"100%",height:250},r.a.createElement(Ie.g,{width:"100%",height:"100%",onMouseEnter:this.onPieEnter},r.a.createElement(Ie.f,{data:s,cx:"50%",cy:"50%",labelLine:!1,innerRadius:"70%",outerRadius:"100%",fill:"#8884d8",dataKey:"value"},s.map(function(e,t){return r.a.createElement(Ie.d,{fill:l[t%l.length]})})),r.a.createElement(Ie.e,{layout:"vertical",verticalAlign:"middle",align:"right"})))}}]),t}(r.a.Component)),Bt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return[r.a.createElement("div",{className:v()(e.layout,e.cardGrid)},r.a.createElement(je.a,{container:!0,spacing:40},r.a.createElement(je.a,{item:!0,key:"internalExternal",sm:12,md:6,lg:6},r.a.createElement(Oe.a,{className:e.card},r.a.createElement(ge.a,{className:e.cardContent},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Internal/External communication"),r.a.createElement(St,{device:this.props.device,cidr:this.props.cidr})))),r.a.createElement(je.a,{item:!0,key:"ingoingOutgoing",sm:12,md:6,lg:6},r.a.createElement(Oe.a,{className:e.card},r.a.createElement(ge.a,{className:e.cardContent},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Ingoing/Outgoing communication"),r.a.createElement(Nt,{device:this.props.device,cidr:this.props.cidr})))),r.a.createElement(je.a,{item:!0,key:"history",sm:12,md:6,lg:6},r.a.createElement(Oe.a,{className:e.card},r.a.createElement(ge.a,{className:e.cardContent},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Communication history"),r.a.createElement(_e.a,{width:"100%",height:250},r.a.createElement(Le,{devices:[this.props.device],cidr:this.props.cidr,history:this.props.history})))))))]}}]),t}(r.a.Component),Ft=Object(g.withStyles)(function(e){return{root:Object(m.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(8*e.spacing.unit,"px 0 ").concat(6*e.spacing.unit,"px")},heroButtons:{marginTop:4*e.spacing.unit},layout:{width:"auto"},cardGrid:{padding:"".concat(2*e.spacing.unit,"px 0")},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})(Bt),Tt=a(149),Dt=a.n(Tt),At=a(296),_t=a.n(At),It=a(59),Pt=a.n(It),Mt=a(34),Rt=a.n(Mt),Gt=a(150),Lt=a.n(Gt),Jt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=[];for(var a in this.props.device.connections)t.push([a,this.props.device.connections[a]]);return t.sort(function(e,t){return t[1].snd+t[1].rcv-(e[1].snd+e[1].rcv)}),[r.a.createElement(fe.a,{style:{textAlign:"center"},className:e.root,key:this.props.device.mac},r.a.createElement(Xe,{devices:[this.props.device],cidr:this.props.cidr})),r.a.createElement(fe.a,{className:e.root},r.a.createElement(Dt.a,{className:e.table},r.a.createElement(_t.a,null,r.a.createElement(Pt.a,null,r.a.createElement(Rt.a,null,"IP"),r.a.createElement(Rt.a,{align:"right"},"Domains"),r.a.createElement(Rt.a,{align:"right"},"Location"),r.a.createElement(Rt.a,{align:"right"},"# packages"))),r.a.createElement(Lt.a,null,t.map(function(e){var t,a=e[1].domains.map(function(e){return r.a.createElement("div",null,e)});return r.a.createElement(Pt.a,{key:e[0]},r.a.createElement(Rt.a,{component:"th",scope:"row"},e[0]),r.a.createElement(Rt.a,{align:"right"},a),r.a.createElement(Rt.a,{align:"right"},(t=e[1]).location?t.location.city+" ("+t.location.cc+")":"unknown"),r.a.createElement(Rt.a,{align:"right"},e[1].snd+e[1].rcv," (\u2193 ",e[1].rcv," \u2191 ",e[1].snd,")"))}))))]}}]),t}(r.a.Component);var Wt=Object(g.withStyles)(function(e){return{root:{marginTop:2*e.spacing.unit,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit},heroButtons:{marginTop:4*e.spacing.unit},layout:{width:"auto"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})(Jt),Ht=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"getVendor",value:function(){return this.props.device.vendor&&this.props.device.vendor[this.props.device.mac]?this.props.device.vendor[this.props.device.mac]:"unknown"}},{key:"getOSMatch",value:function(){return this.props.device.osmatch&&this.props.device.osmatch.length>0?this.props.device.osmatch.map(function(e){return r.a.createElement("div",null,e.name)}):"unknown"}},{key:"getPorts",value:function(){var e=this;return this.props.device.tcp&&Object.keys(this.props.device.tcp).length>0&&Object.keys(this.props.device.tcp).filter(function(t){return"open"===e.props.device.tcp[t].state}).length>0?Object.keys(this.props.device.tcp).filter(function(t){return"open"===e.props.device.tcp[t].state}).map(function(t){return r.a.createElement("div",null,r.a.createElement("pre",null,t,":   ",e.props.device.tcp[t].name," (",e.props.device.tcp[t].product,")"))}):"none"}},{key:"render",value:function(){var e=this.props.classes,t=this.getPorts();return r.a.createElement(fe.a,{className:e.root},r.a.createElement(Dt.a,{className:e.table},r.a.createElement(Lt.a,null,r.a.createElement(Pt.a,{key:"dname"},r.a.createElement(Rt.a,{component:"th",scope:"row",style:{width:"200px"}},"Name:"),r.a.createElement(Rt.a,{component:"th",scope:"row"},this.props.device.name)),r.a.createElement(Pt.a,{key:"dip"},r.a.createElement(Rt.a,{component:"th",scope:"row"},"Ip:"),r.a.createElement(Rt.a,{component:"th",scope:"row"},this.props.device.ip)),r.a.createElement(Pt.a,{key:"dmac"},r.a.createElement(Rt.a,{component:"th",scope:"row"},"MAC:"),r.a.createElement(Rt.a,{component:"th",scope:"row"},this.props.device.mac)),r.a.createElement(Pt.a,{key:"dvendor"},r.a.createElement(Rt.a,{component:"th",scope:"row"},"Vendor:"),r.a.createElement(Rt.a,{component:"th",scope:"row"},this.getVendor())),r.a.createElement(Pt.a,{key:"dos"},r.a.createElement(Rt.a,{component:"th",scope:"row",style:{verticalAlign:"top",paddingTop:"18px"}},"Possible OS:"),r.a.createElement(Rt.a,{component:"th",scope:"row"},this.getOSMatch())),r.a.createElement(Pt.a,{key:"dports"},r.a.createElement(Rt.a,{component:"th",scope:"row",style:{verticalAlign:"top",paddingTop:"18px"}},"Known ports:"),r.a.createElement(Rt.a,{component:"th",scope:"row"},t)))))}}]),t}(r.a.Component),zt=Object(g.withStyles)(function(e){return{root:{marginTop:2*e.spacing.unit,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit},heroButtons:{marginTop:4*e.spacing.unit},layout:{width:"auto"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})(Ht),Yt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={value:0},a.handleChange=function(e,t){a.setState({value:t})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=[];return 0===this.state.value?t=r.a.createElement(Ct,{device:this.props.device,cidr:this.props.cidr}):1===this.state.value?t=r.a.createElement(Ft,{device:this.props.device,cidr:this.props.cidr,history:this.props.history}):2===this.state.value?t=r.a.createElement(Wt,{device:this.props.device,cidr:this.props.cidr}):3===this.state.value&&(t=r.a.createElement(zt,{device:this.props.device,cidr:this.props.cidr})),[r.a.createElement("div",{key:"spacer",className:e.appBarSpacer}),r.a.createElement(S.a,{key:"typo1",variant:"h4",gutterBottom:!0,component:"h2"},this.props.device.name),r.a.createElement(fe.a,{square:!0},r.a.createElement(j.a,{position:"static",color:"default"},r.a.createElement(ut.a,{value:this.state.value,indicatorColor:"primary",textColor:"primary",onChange:this.handleChange},r.a.createElement(ht.a,{label:"Overview"}),r.a.createElement(ht.a,{label:"Activity"}),r.a.createElement(ht.a,{label:"Communication Partners"}),r.a.createElement(ht.a,{label:"Info"})))),t]}}]),t}(r.a.Component),Kt=Object(g.withStyles)(function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar}})(Yt),Ut=a(198),Vt=a(117),Xt=a.n(Vt),qt=a(301),$t=a.n(qt),Qt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={open:!0,navigation:"Overview",timeSelect:300,historySelection:[]},a.handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})},a.filteredHistory=Object(Ut.a)(function(e,t){if(!e)return[];var a=e.reduce(function(e,t){return Math.max(e,t.time)},0);return e.filter(function(e){return e.time>a-t})}),a.mergedScan=Object(Ut.a)(function(e){if(!e||0==e.length)return{};var t=e.length-1,a=JSON.parse(JSON.stringify(e.pop()));for(t--;t>=0;){var n=e[t],r=!0,i=!1,c=void 0;try{for(var o,s=function(){var e=o.value,t=a.devices.find(function(t){return t.mac===e.mac});if(t)for(var n in e.connections){var r=e.connections[n],i=t.connections[n];i?(i.brcv+=r.brcv,i.bsnd+=r.bsnd,i.rcv+=r.rcv,i.snd+=r.snd,r.location?i.location=r.location:i.location={lon:45*Math.random(),lat:100*Math.random()}):t.connections[n]=r}else a.devices.push(e)},l=n.devices[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)s()}catch(p){i=!0,c=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw c}}t--}return a}),a.navigate=a.navigate.bind(Object(d.a)(Object(d.a)(a))),a.handleTimeSelect=a.handleTimeSelect.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"navigate",value:function(e){this.setState({navigation:e})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.filteredHistory(this.props.history,this.state.timeSelect),n=this.mergedScan(a),i=null;if("Overview"===this.state.navigation)i=r.a.createElement(Fe,null);else if("Internet_Usage"===this.state.navigation)i=r.a.createElement(ze,{devices:n.devices,history:a,timeSelect:this.state.timeSelect});else if("Locations"===this.state.navigation)i=r.a.createElement(ot,{devices:n.devices,cidr:this.props.cidr});else if("Devices"===this.state.navigation)i=r.a.createElement(lt,null);else{var c=n.devices.find(function(t){return t.ip==e.state.navigation});i=r.a.createElement(Kt,{device:c,cidr:this.props.cidr,history:a})}return r.a.createElement("div",{className:t.root},r.a.createElement(E.a,null),r.a.createElement(j.a,{position:"absolute",className:v()(t.appBar,!1)},r.a.createElement(x.a,{disableGutters:!this.state.open,className:t.toolbar},r.a.createElement(T.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:v()(t.menuButton,this.state.open&&t.menuButtonHidden)},r.a.createElement(I.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"HomeLab"),r.a.createElement("div",{className:t.timeSelect},r.a.createElement($t.a,{className:t.toggleGroup,value:this.state.timeSelect,exclusive:!0,onChange:this.handleTimeSelect},r.a.createElement(Xt.a,{value:2592e3},"30d"),r.a.createElement(Xt.a,{value:86400},"24h"),r.a.createElement(Xt.a,{value:3600},"1h"),r.a.createElement(Xt.a,{value:300},"5min"))),r.a.createElement(T.a,{color:"inherit"},r.a.createElement(A.a,{badgeContent:4,color:"secondary"},r.a.createElement(G.a,null))))),r.a.createElement(O.a,{variant:"permanent",classes:{paper:v()(t.drawerPaper,!this.state.open&&t.drawerPaperClose)},open:this.state.open},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(T.a,{onClick:this.handleDrawerClose},r.a.createElement(M.a,null))),r.a.createElement(B.a,null),r.a.createElement(he,{navigate:this.navigate,devices:this.props.devices})),r.a.createElement("main",{className:t.content},i))}},{key:"handleTimeSelect",value:function(e,t){this.setState({timeSelect:t})}}]),t}(r.a.Component),Zt=Object(g.withStyles)(function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(h.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit},e.breakpoints.up("sm"),{width:9*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit,height:"100vh",overflow:"auto"},chartContainer:{marginLeft:-22},tableContainer:{height:320},h5:{marginBottom:2*e.spacing.unit},nested:{paddingLeft:4*e.spacing.unit},timeSelect:{flexGrow:1},toggleGroup:{display:"inline-block"}}})(Qt),ea=a(109),ta=a.n(ea),aa=a(191),na=a.n(aa),ra=ta()({palette:{primary:{main:"#455a64"},secondary:{main:"#0277bd"}}}),ia=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).initWS(),a.state={devices:[],route:null,device:null,scan_text:"",scan_progress:0,disclaimer:0,once_open:!1,cidr:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"initWS",value:function(){var e=this,t=this;this.ws=new WebSocket("ws://"+window.location.hostname+":7463"),this.ws.onopen=function(){console.log("connection open"),t.setState({once_open:!0})},this.ws.onmessage=function(e){console.log(e.data);var a=JSON.parse(e.data);a.type&&"device_list"===a.type&&(t.setState({devices:a.payload}),"scan"===t.state.route&&t.setState({route:null,scan_text:""})),a.type&&"scan_result"===a.type&&(t.setState({cidr:a.payload.cidr}),t.setState({devices:a.payload.devices}),"scan"===t.state.route&&t.setState({route:null,scan_text:""})),a.type&&"history"===a.type&&t.setState({history:a.payload}),a.type&&"scan_update"===a.type&&(t.setState({scan_text:a.payload.text}),t.setState({scan_progress:a.payload.progress}))},this.ws.onerror=function(a){t.state.once_open&&(alert(JSON.stringify(a)),t.setState({once_open:!1})),console.log(a),e.initWS()}}},{key:"render",value:function(){return r.a.createElement(na.a,{theme:ra},r.a.createElement(Zt,{devices:this.state.devices,cidr:this.state.cidr,history:this.state.history}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ia,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[329,1,2]]]);
//# sourceMappingURL=main.c3695aca.chunk.js.map